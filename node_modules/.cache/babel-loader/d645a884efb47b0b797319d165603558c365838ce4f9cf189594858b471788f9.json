{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import{Route,Routes,Navigate}from\"react-router-dom\";import\"../App.css\";import CurrentUserContext from\"../contexts/CurrentUserContext\";import api from\"../utils/api\";import{Footer}from\"./Footer\";import{Header}from\"./Header\";import{Main}from\"./Main\";import Login from\"./Login\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export function App(){const[loggedIn,setLoggedIn]=useState(false);const[currentUser,setCurrentUser]=useState(null);useEffect(()=>{try{api.getUserInfo().then(userInfo=>{setCurrentUser(userInfo);setLoggedIn(true);});api.getInitialCards().then(cards=>{setCards(cards);});}catch(error){console.error(\"Error fetching current user data:\",error);}},[]);const[user,setUser]=useState(null);const[cards,setCards]=useState([]);const[isImagePopupOpen,setIsImagePopupOpen]=useState(false);const[isPopupConfirmOpen,setIsPopupConfirmOpen]=useState(false);const[selectedCard,setSelectedCard]=useState(null);const[isAddPlacePopupOpen,setIsAddPlacePopupOpen]=useState(false);const[isEditProfilePopupOpen,setIsEditProfilePopupOpen]=useState(false);const[isEditAvatarPopupOpen,setIsEditAvatarPopupOpen]=useState(false);const closeImagePopup=()=>{setIsImagePopupOpen(false);};const closePopupConfirm=()=>{setIsPopupConfirmOpen(false);};const onAddCard=()=>{setIsAddPlacePopupOpen(true);};const onEditAvatarClick=()=>{setIsEditAvatarPopupOpen(true);};const onEditProfileClick=()=>{setIsEditProfilePopupOpen(true);};const deleteSelectedCard=async()=>{const cardId=selectedCard._id;setCards(cards.filter(card=>card._id!==cardId));await api.deleteCard(cardId);};const handleUpdateUser=async(name,about)=>{const newUser=await api.setUserInfo({name,about});setUser(newUser);setCurrentUser(newUser);setIsEditProfilePopupOpen(false);};const handleUpdateAvatar=async e=>{const profileImageUrl=e;const newUser=await api.setUserImage(profileImageUrl);setUser(newUser);setCurrentUser(newUser);setIsEditAvatarPopupOpen(false);};return/*#__PURE__*/_jsxs(\"div\",{className:\"page__content\",children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsx(CurrentUserContext.Provider,{value:currentUser,children:loggedIn&&/*#__PURE__*/_jsx(Main,{user:user,cards:cards,isImagePopupOpen:isImagePopupOpen,isPopupConfirmOpen:isPopupConfirmOpen,selectedCard:selectedCard,isAddPlacePopupOpen:isAddPlacePopupOpen,isEditProfilePopupOpen:isEditProfilePopupOpen,isEditAvatarPopupOpen:isEditAvatarPopupOpen,closeImagePopup:closeImagePopup,closePopupConfirm:closePopupConfirm,onAddCard:onAddCard,onEditAvatarClick:onEditAvatarClick,onEditProfileClick:onEditProfileClick,deleteSelectedCard:deleteSelectedCard,handleUpdateUser:handleUpdateUser,handleUpdateAvatar:handleUpdateAvatar,setUser:setUser,setCards:setCards,setSelectedCard:setSelectedCard,setIsImagePopupOpen:setIsImagePopupOpen,setIsPopupConfirmOpen:setIsPopupConfirmOpen,setIsAddPlacePopupOpen:setIsAddPlacePopupOpen,setIsEditProfilePopupOpen:setIsEditProfilePopupOpen,setIsEditAvatarPopupOpen:setIsEditAvatarPopupOpen})}),/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/signup\",element:{/* <Register /> */}}),/*#__PURE__*/_jsx(Route,{path:\"/login\",element:/*#__PURE__*/_jsx(Login,{})}),/*#__PURE__*/_jsx(Route,{path:\"/\",element:loggedIn?/*#__PURE__*/_jsx(Navigate,{to:\"/profile\"}):/*#__PURE__*/_jsx(Navigate,{to:\"/signin\"})})]}),/*#__PURE__*/_jsx(Footer,{})]});}","map":{"version":3,"names":["React","useEffect","useState","Route","Routes","Navigate","CurrentUserContext","api","Footer","Header","Main","Login","jsx","_jsx","jsxs","_jsxs","App","loggedIn","setLoggedIn","currentUser","setCurrentUser","getUserInfo","then","userInfo","getInitialCards","cards","setCards","error","console","user","setUser","isImagePopupOpen","setIsImagePopupOpen","isPopupConfirmOpen","setIsPopupConfirmOpen","selectedCard","setSelectedCard","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","closeImagePopup","closePopupConfirm","onAddCard","onEditAvatarClick","onEditProfileClick","deleteSelectedCard","cardId","_id","filter","card","deleteCard","handleUpdateUser","name","about","newUser","setUserInfo","handleUpdateAvatar","e","profileImageUrl","setUserImage","className","children","Provider","value","path","element","to"],"sources":["/Users/umiter/Desktop/TripleTen/Sprint 15/web_project_around_auth/src/components/App.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { Route, Routes, Navigate } from \"react-router-dom\";\nimport \"../App.css\";\nimport CurrentUserContext from \"../contexts/CurrentUserContext\";\nimport api from \"../utils/api\";\nimport { Footer } from \"./Footer\";\nimport { Header } from \"./Header\";\nimport { Main } from \"./Main\";\nimport Login from \"./Login\";\n\nexport function App() {\n  const [loggedIn, setLoggedIn] = useState(false);\n  const [currentUser, setCurrentUser] = useState(null);\n\n  useEffect(() => {\n    try {\n      api.getUserInfo().then((userInfo) => {\n        setCurrentUser(userInfo);\n        setLoggedIn(true);\n      });\n\n      api.getInitialCards().then((cards) => {\n        setCards(cards);\n      });\n    } catch (error) {\n      console.error(\"Error fetching current user data:\", error);\n    }\n  }, []);\n\n  const [user, setUser] = useState(null);\n  const [cards, setCards] = useState([]);\n  const [isImagePopupOpen, setIsImagePopupOpen] = useState(false);\n  const [isPopupConfirmOpen, setIsPopupConfirmOpen] = useState(false);\n  const [selectedCard, setSelectedCard] = useState(null);\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = useState(false);\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = useState(false);\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = useState(false);\n\n  const closeImagePopup = () => {\n    setIsImagePopupOpen(false);\n  };\n\n  const closePopupConfirm = () => {\n    setIsPopupConfirmOpen(false);\n  };\n\n  const onAddCard = () => {\n    setIsAddPlacePopupOpen(true);\n  };\n\n  const onEditAvatarClick = () => {\n    setIsEditAvatarPopupOpen(true);\n  };\n\n  const onEditProfileClick = () => {\n    setIsEditProfilePopupOpen(true);\n  };\n\n  const deleteSelectedCard = async () => {\n    const cardId = selectedCard._id;\n    setCards(cards.filter((card) => card._id !== cardId));\n    await api.deleteCard(cardId);\n  };\n\n  const handleUpdateUser = async (name, about) => {\n    const newUser = await api.setUserInfo({ name, about });\n    setUser(newUser);\n    setCurrentUser(newUser);\n    setIsEditProfilePopupOpen(false);\n  };\n\n  const handleUpdateAvatar = async (e) => {\n    const profileImageUrl = e;\n    const newUser = await api.setUserImage(profileImageUrl);\n    setUser(newUser);\n    setCurrentUser(newUser);\n    setIsEditAvatarPopupOpen(false);\n  };\n\n  return (\n    <div className=\"page__content\">\n      <Header />\n      <CurrentUserContext.Provider value={currentUser}>\n        {loggedIn && (\n          <Main\n            user={user}\n            cards={cards}\n            isImagePopupOpen={isImagePopupOpen}\n            isPopupConfirmOpen={isPopupConfirmOpen}\n            selectedCard={selectedCard}\n            isAddPlacePopupOpen={isAddPlacePopupOpen}\n            isEditProfilePopupOpen={isEditProfilePopupOpen}\n            isEditAvatarPopupOpen={isEditAvatarPopupOpen}\n            closeImagePopup={closeImagePopup}\n            closePopupConfirm={closePopupConfirm}\n            onAddCard={onAddCard}\n            onEditAvatarClick={onEditAvatarClick}\n            onEditProfileClick={onEditProfileClick}\n            deleteSelectedCard={deleteSelectedCard}\n            handleUpdateUser={handleUpdateUser}\n            handleUpdateAvatar={handleUpdateAvatar}\n            setUser={setUser}\n            setCards={setCards}\n            setSelectedCard={setSelectedCard}\n            setIsImagePopupOpen={setIsImagePopupOpen}\n            setIsPopupConfirmOpen={setIsPopupConfirmOpen}\n            setIsAddPlacePopupOpen={setIsAddPlacePopupOpen}\n            setIsEditProfilePopupOpen={setIsEditProfilePopupOpen}\n            setIsEditAvatarPopupOpen={setIsEditAvatarPopupOpen}\n          />\n        )}\n      </CurrentUserContext.Provider>\n\n      <Routes>\n        <Route\n          path=\"/signup\"\n          element={\n            {\n              /* <Register /> */\n            }\n          }\n        />\n        <Route path=\"/login\" element={<Login />} />\n        <Route\n          path=\"/\"\n          element={\n            loggedIn ? <Navigate to=\"/profile\" /> : <Navigate to=\"/signin\" />\n          }\n        />\n      </Routes>\n      <Footer />\n    </div>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}