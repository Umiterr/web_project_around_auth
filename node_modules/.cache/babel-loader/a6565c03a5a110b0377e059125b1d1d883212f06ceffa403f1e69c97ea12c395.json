{"ast":null,"code":"import React,{useState,useEffect,useRef}from\"react\";import{Popup}from\"./Popup/Popup\";import PopupWithForm from\"./PopupWithForm\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export function EditAvatarPopup(_ref){let{isOpen,closePopup,onSubmit}=_ref;const imageInput=useRef();const[isFormValid,setIsFormValid]=useState(false);const[url,setUrl]=useState(\"\");const[urlErrorVisible,setUrlErrorVisible]=useState(false);const[urlTouched,setUrlTouched]=useState(false);const handleSubmit=e=>{e.preventDefault();onSubmit(imageInput===null||imageInput===void 0?void 0:imageInput.current.value);};const urlRegex=/https?:\\/\\/(www\\.)?[-a-zA-Z0-9@:%._\\+~#=]{1,256}\\.[a-zA-Z0-9()]{1,6}\\b([-a-zA-Z0-9()@:%_\\+.~#?&//=]*)/;useEffect(()=>{if(urlTouched){setIsFormValid(urlRegex.test(url)&&url.length>0);// Fixed 'name' to 'url'\nsetUrlErrorVisible(urlTouched&&!urlRegex.test(url));// Removed url && from condition\n}},[url,urlTouched]);const handleUrlChange=e=>{setUrl(e.target.value);setUrlTouched(true);};return/*#__PURE__*/_jsx(Popup,{type:\"form-image-profile\",className:\"form\",isOpen:isOpen,closePopup:closePopup,children:/*#__PURE__*/_jsxs(PopupWithForm,{type:\"form-image-profile\",onSubmit:handleSubmit,title:\"\\xBFCambiar foto de perfil\",buttonTitle:\"Guardar\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"form__input form-image-profile__url\",type:\"url\",id:\"url-profile-image-input\",name:\"profileImageUrl\",placeholder:\"URL de la imagen\",onChange:handleUrlChange// Fixed function name from handleNameChange to handleUrlChange\n,required:true,ref:imageInput}),/*#__PURE__*/_jsx(\"span\",{className:\"form__input-error url-profile-image-input-error \".concat(urlErrorVisible?\"form__input-error_active\":\"\"),children:\"ingrese una URL v\\xE1lida\"})]})});}","map":{"version":3,"names":["React","useState","useEffect","useRef","Popup","PopupWithForm","jsx","_jsx","jsxs","_jsxs","EditAvatarPopup","_ref","isOpen","closePopup","onSubmit","imageInput","isFormValid","setIsFormValid","url","setUrl","urlErrorVisible","setUrlErrorVisible","urlTouched","setUrlTouched","handleSubmit","e","preventDefault","current","value","urlRegex","test","length","handleUrlChange","target","type","className","children","title","buttonTitle","id","name","placeholder","onChange","required","ref","concat"],"sources":["/Users/umiter/Desktop/TripleTen/Sprint 15/web_project_around_auth/src/components/EditAvatarPopup.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\nimport { Popup } from \"./Popup/Popup\";\nimport PopupWithForm from \"./PopupWithForm\";\n\nexport function EditAvatarPopup({ isOpen, closePopup, onSubmit }) {\n  const imageInput = useRef();\n  const [isFormValid, setIsFormValid] = useState(false);\n  const [url, setUrl] = useState(\"\");\n  const [urlErrorVisible, setUrlErrorVisible] = useState(false);\n  const [urlTouched, setUrlTouched] = useState(false);\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    onSubmit(imageInput?.current.value);\n  };\n\n  const urlRegex =\n    /https?:\\/\\/(www\\.)?[-a-zA-Z0-9@:%._\\+~#=]{1,256}\\.[a-zA-Z0-9()]{1,6}\\b([-a-zA-Z0-9()@:%_\\+.~#?&//=]*)/;\n\n  useEffect(() => {\n    if (urlTouched) {\n      setIsFormValid(urlRegex.test(url) && url.length > 0); // Fixed 'name' to 'url'\n      setUrlErrorVisible(urlTouched && !urlRegex.test(url)); // Removed url && from condition\n    }\n  }, [url, urlTouched]);\n\n  const handleUrlChange = (e) => {\n    setUrl(e.target.value);\n    setUrlTouched(true);\n  };\n\n  return (\n    <Popup\n      type=\"form-image-profile\"\n      className=\"form\"\n      isOpen={isOpen}\n      closePopup={closePopup}\n    >\n      <PopupWithForm\n        type=\"form-image-profile\"\n        onSubmit={handleSubmit}\n        title=\"¿Cambiar foto de perfil\"\n        buttonTitle=\"Guardar\"\n      >\n        <input\n          className=\"form__input form-image-profile__url\"\n          type=\"url\"\n          id=\"url-profile-image-input\"\n          name=\"profileImageUrl\"\n          placeholder=\"URL de la imagen\"\n          onChange={handleUrlChange} // Fixed function name from handleNameChange to handleUrlChange\n          required\n          ref={imageInput}\n        />\n        <span\n          className={`form__input-error url-profile-image-input-error ${\n            urlErrorVisible ? \"form__input-error_active\" : \"\"\n          }`}\n        >\n          ingrese una URL válida\n        </span>\n      </PopupWithForm>\n    </Popup>\n  );\n}\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,CAAEC,MAAM,KAAQ,OAAO,CAC1D,OAASC,KAAK,KAAQ,eAAe,CACrC,MAAO,CAAAC,aAAa,KAAM,iBAAiB,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAE5C,MAAO,SAAS,CAAAC,eAAeA,CAAAC,IAAA,CAAmC,IAAlC,CAAEC,MAAM,CAAEC,UAAU,CAAEC,QAAS,CAAC,CAAAH,IAAA,CAC9D,KAAM,CAAAI,UAAU,CAAGZ,MAAM,CAAC,CAAC,CAC3B,KAAM,CAACa,WAAW,CAAEC,cAAc,CAAC,CAAGhB,QAAQ,CAAC,KAAK,CAAC,CACrD,KAAM,CAACiB,GAAG,CAAEC,MAAM,CAAC,CAAGlB,QAAQ,CAAC,EAAE,CAAC,CAClC,KAAM,CAACmB,eAAe,CAAEC,kBAAkB,CAAC,CAAGpB,QAAQ,CAAC,KAAK,CAAC,CAC7D,KAAM,CAACqB,UAAU,CAAEC,aAAa,CAAC,CAAGtB,QAAQ,CAAC,KAAK,CAAC,CAEnD,KAAM,CAAAuB,YAAY,CAAIC,CAAC,EAAK,CAC1BA,CAAC,CAACC,cAAc,CAAC,CAAC,CAClBZ,QAAQ,CAACC,UAAU,SAAVA,UAAU,iBAAVA,UAAU,CAAEY,OAAO,CAACC,KAAK,CAAC,CACrC,CAAC,CAED,KAAM,CAAAC,QAAQ,CACZ,uGAAuG,CAEzG3B,SAAS,CAAC,IAAM,CACd,GAAIoB,UAAU,CAAE,CACdL,cAAc,CAACY,QAAQ,CAACC,IAAI,CAACZ,GAAG,CAAC,EAAIA,GAAG,CAACa,MAAM,CAAG,CAAC,CAAC,CAAE;AACtDV,kBAAkB,CAACC,UAAU,EAAI,CAACO,QAAQ,CAACC,IAAI,CAACZ,GAAG,CAAC,CAAC,CAAE;AACzD,CACF,CAAC,CAAE,CAACA,GAAG,CAAEI,UAAU,CAAC,CAAC,CAErB,KAAM,CAAAU,eAAe,CAAIP,CAAC,EAAK,CAC7BN,MAAM,CAACM,CAAC,CAACQ,MAAM,CAACL,KAAK,CAAC,CACtBL,aAAa,CAAC,IAAI,CAAC,CACrB,CAAC,CAED,mBACEhB,IAAA,CAACH,KAAK,EACJ8B,IAAI,CAAC,oBAAoB,CACzBC,SAAS,CAAC,MAAM,CAChBvB,MAAM,CAAEA,MAAO,CACfC,UAAU,CAAEA,UAAW,CAAAuB,QAAA,cAEvB3B,KAAA,CAACJ,aAAa,EACZ6B,IAAI,CAAC,oBAAoB,CACzBpB,QAAQ,CAAEU,YAAa,CACvBa,KAAK,CAAC,4BAAyB,CAC/BC,WAAW,CAAC,SAAS,CAAAF,QAAA,eAErB7B,IAAA,UACE4B,SAAS,CAAC,qCAAqC,CAC/CD,IAAI,CAAC,KAAK,CACVK,EAAE,CAAC,yBAAyB,CAC5BC,IAAI,CAAC,iBAAiB,CACtBC,WAAW,CAAC,kBAAkB,CAC9BC,QAAQ,CAAEV,eAAiB;AAAA,CAC3BW,QAAQ,MACRC,GAAG,CAAE7B,UAAW,CACjB,CAAC,cACFR,IAAA,SACE4B,SAAS,oDAAAU,MAAA,CACPzB,eAAe,CAAG,0BAA0B,CAAG,EAAE,CAChD,CAAAgB,QAAA,CACJ,2BAED,CAAM,CAAC,EACM,CAAC,CACX,CAAC,CAEZ"},"metadata":{},"sourceType":"module","externalDependencies":[]}